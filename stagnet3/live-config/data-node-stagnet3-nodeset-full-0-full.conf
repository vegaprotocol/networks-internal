GatewayEnabled = true
UlimitNOFile = 8192

[API]
  CoreNodeGRPCPort = 3002
  CoreNodeIP = "127.0.0.1"
  ExposeLegacyAPI = false
  IP = "0.0.0.0"
  LegacyAPIPortOffset = 100
  Level = "Info"
  Port = 3007
  Reflection = false
  StreamRetries = 3
  Timeout = "5s"
  WebUIEnabled = false
  WebUIPort = 3006

[Accounts]
  Level = "Info"

[Assets]
  Level = "Info"

[Broker]
  BlockProcessingTimeout = "30s"
  Level = "Info"
  PanicOnError = false
  SocketServerInboundBufferSize = 10000
  SocketServerOutboundBufferSize = 10000
  UseEventFile = false
  [Broker.FileEventSourceConfig]
    File = "vega.evt"
    SendChannelBufferSize = 1000
    TimeBetweenBlocks = "1s"
  [Broker.SocketConfig]
    IP = "0.0.0.0"
    MaxReceiveTimeouts = 3
    Port = 3005
    TransportType = "tcp"

[Candles]
  Level = "Info"

[CandlesV2]
  Level = "Info"
  [CandlesV2.CandleStore]
    DefaultCandleIntervals = ""
  [CandlesV2.CandleUpdates]
    CandleUpdatesStreamBufferSize = 100
    CandleUpdatesStreamInterval = "1s"
    CandlesFetchTimeout = "10s"

[Checkpoint]
  Level = "Info"

[Delegations]
  Level = "Info"

[Epochs]
  Level = "Info"

[Fee]
  Level = "Info"

[Gateway]
  GraphQLPlaygroundEnabled = true
  Level = "Info"
  SubscriptionRetries = 3
  Timeout = "5s"
  [Gateway.GraphQL]
    AutoCertDomain = ""
    CertificateFile = ""
    ComplexityLimit = 0
    Enabled = true
    HTTPSEnabled = false
    IP = "0.0.0.0"
    KeyFile = ""
    Port = 3008
  [Gateway.Node]
    IP = "0.0.0.0"
    Port = 3007
  [Gateway.REST]
    APMEnabled = true
    Enabled = true
    IP = "0.0.0.0"
    Port = 3009

[Governance]
  Level = "Info"

[Liquidity]
  Level = "Info"

[Logging]
  Environment = "dev"
  [Logging.Custom]
    [Logging.Custom.Zap]
      Development = true
      Encoding = "console"
      ErrorOutputPaths = ["stderr"]
      Level = -1
      OutputPaths = ["stdout"]
    [Logging.Custom.ZapEncoder]
      CallerKey = "C"
      EncodeCaller = "short"
      EncodeDuration = "string"
      EncodeLevel = "capital"
      EncodeName = "full"
      EncodeTime = "iso8601"
      LevelKey = "L"
      LineEnding = "\n"
      MessageKey = "M"
      NameKey = "N"
      TimeKey = "T"

[Markets]
  Level = "Info"

[Metrics]
  Enabled = false
  Level = "Info"
  Path = "/metrics"
  Port = 2102
  Timeout = "5s"

[NetworkParameters]
  Level = "Info"

[Nodes]
  Level = "Info"

[Notary]
  Level = "Info"

[Oracles]
  Level = "Info"

[Orders]
  Level = "Info"

[Parties]
  Level = "Info"

[Pprof]
  BlockProfileRate = 0
  Enabled = true
  Level = "Info"
  MutexProfileFraction = 0
  Port = 6060
  ProfilesDir = "/local/vega/.data-node"
  WriteEvery = "15m0s"

[Risk]
  Level = "Info"

[SQLStore]
  Enabled = false
  FanOutBufferSize = 1000
  Level = "Info"
  UseEmbedded = false
  WipeOnStartup = true
  [SQLStore.ConnectionConfig]
    Database = "vega"
    Host = "localhost"
    Password = "vega"
    Port = 5432
    UseTransactions = true
    Username = "vega"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "balances"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "conflated_balances"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "ledger"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "orders_history"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "trades"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 month"
    HypertableOrCaggName = "trades_candle_1_minute"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 month"
    HypertableOrCaggName = "trades_candle_5_minutes"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 month"
    HypertableOrCaggName = "trades_candle_15_minutes"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "trades_candle_1_hour"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "trades_candle_6_hours"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "market_data"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "margin_levels"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "conflated_margin_levels"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "7 days"
    HypertableOrCaggName = "positions"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "conflated_positions"

  [[SQLStore.RetentionPolicies]]
    DataRetentionPeriod = "1 year"
    HypertableOrCaggName = "liquidity_provisions"

[Service]
  Level = "Info"

[SqlStore]
  Port = 5032

[Storage]
  Level = "Warning"
  LogPositionStoreDebug = false
  Timeout = "5s"
  [Storage.Accounts]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false
  [Storage.Candles]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false
  [Storage.Checkpoints]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false
  [Storage.Markets]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false
  [Storage.Orders]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false
  [Storage.Trades]
    BlockSize = 4096
    BloomFalsePositive = 0.01
    ChecksumVerificationMode = 0
    CompactL0OnClose = true
    Compression = 1
    EventLogging = true
    KeepL0InMemory = false
    LevelOneSize = 268435456
    LevelSizeMultiplier = 2
    LogRotatesToFlush = 2
    MaxCacheSize = 16777216
    MaxLevels = 10
    MaxTableSize = 67108864
    NumCompactors = 2
    NumLevelZeroTables = 1
    NumLevelZeroTablesStall = 2
    NumMemtables = 1
    NumVersionsToKeep = 1
    ReadOnly = false
    SyncWrites = true
    TableLoadingMode = "MemoryMap"
    Truncate = false
    ValueLogFileSize = 1073741823
    ValueLogLoadingMode = "MemoryMap"
    ValueLogMaxEntries = 2500000
    ValueThreshold = 16
    VerifyValueChecksum = false

[Subscribers]
  MarketEventLogLevel = "Info"
  OrderEventLogLevel = "Info"

[Time]
  Level = "Info"

[Trades]
  Level = "Info"
  PageSizeDefault = 200
  PageSizeMaximum = 200

[Transfers]
  Level = "Info"
